version: 1.0

description: A workflow containing action with output schema.

input:
  - a1  

vars:
  - secretParam: null

output:
  - secretParam: <% ctx().secretParam %>

tasks:
  task1:
    action: core.echo
    input:
      message: <% ctx().a1 %>
    next:
      - when: <% succeeded() %>
        do: task2
  task2:
    action: core.echo
    input:
      message: <% ctx().a1 %>
    next:
      - when: <% succeeded() %>
        do: task3
  task3:
    action: core.action_with_output_schema
    input: 
      message: pqr
    next:
      - when: <% succeeded() %>
        publish: secretParam=<% result().result.get(secretParam)%>
